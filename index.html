<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reserva Cambio de Aceite</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
 /* Reset b√°sico */
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* Fondo general */
body {
  font-family: Arial, sans-serif;
  background-color: #121212; /* Fondo oscuro */
  color: #fff;
  padding: 20px;
}

/* Contenedor principal */
form, #recibo {
  max-width: 600px;
  margin: 20px auto;
  background: #1e1e1e;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 0 12px rgba(0,0,0,0.6);
}

/* T√≠tulos */
h2, h3 {
  color: #4caf50; /* Verde destacado */
  margin-bottom: 15px;
  text-align: center;
}

/* Grupos de campos */
.form-group {
  position: relative;
  margin-bottom: 20px;
}

/* √çconos */
.form-group i {
  position: absolute;
  top: 12px;
  left: 10px;
  color: #aaa;
}

/* Inputs, selects y textareas */
input, select, textarea {
  width: 100%;
  padding: 10px 10px 10px 35px; /* espacio para √≠cono */
  border: 1px solid #444;
  border-radius: 5px;
  background: #2a2a2a;
  color: #fff;
  font-size: 14px;
}

input:focus, select:focus, textarea:focus {
  outline: none;
  border-color: #4caf50;
  background: #333;
}

/* Labels */
label {
  display: block;
  margin-top: 5px;
  font-size: 13px;
  color: #bbb;
}

/* Bot√≥n */
button {
  width: 100%;
  padding: 12px;
  background: #4caf50;
  border: none;
  border-radius: 5px;
  color: #fff;
  font-size: 16px;
  cursor: pointer;
  transition: background 0.3s;
}

button:hover {
  background: #45a049;
}

/* Textarea */
textarea {
  resize: vertical;
  min-height: 60px;
}

/* Mensajes */
#mensaje {
  margin-top: 15px;
  font-weight: bold;
  text-align: center;
}

/* Recibo */
#recibo {
  display: none; /* oculto hasta que se genere */
}

#recibo table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 15px;
}

#recibo th, #recibo td {
  border: 1px solid #444;
  padding: 8px;
  text-align: left;
}

#recibo th {
  background: #2a2a2a;
  color: #4caf50;
}

#recibo td {
  background: #1e1e1e;
  color: #fff;
}
<style>

</head>
<body>
<div class="container">
  <h2 id="titulo">Reserva de Servicio a Domicilio</h2>

  <form id="formCita">
    <!-- Nombre -->
    <div class="form-group">
      <i class="fas fa-user"></i>
      <input type="text" name="Nombre" placeholder=" " required>
      <label id="lblNombre">Nombre completo</label>
    </div>

    <!-- Tel√©fono -->
    <div class="form-group">
      <i class="fas fa-phone"></i>
      <input type="tel" name="Telefono" placeholder=" " required>
      <label id="lblTelefono">Tel√©fono</label>
    </div>

    <!-- Correo -->
    <div class="form-group">
      <i class="fas fa-envelope"></i>
      <input type="email" name="Correo" placeholder=" " required>
      <label id="lblCorreo">Correo electr√≥nico</label>
    </div>
    
    <!-- Marca din√°mica -->
    <div class="form-group">
      <i class="fas fa-car"></i>
      <select name="Marca" id="marcaSelect" required>
        <option value="">Selecciona marca</option>
      </select>
      <label id="lblMarca">Marca del veh√≠culo</label>
    </div>

    <!-- Modelo din√°mico -->
    <div class="form-group">
      <i class="fas fa-car-side"></i>
      <select name="Modelo" id="modeloSelect" required>
        <option value="">Selecciona modelo</option>
      </select>
      <label id="lblModelo">Modelo del veh√≠culo</label>
    </div>

    <!-- A√±o -->
    <div class="form-group">
      <i class="fas fa-calendar-alt"></i>
      <input type="number" name="Ano" id="anoInput" placeholder=" " required>
      <label id="lblAno">A√±o del veh√≠culo</label>
    </div>

    <!-- Aceite recomendado (autom√°tico) -->
    <div class="form-group">
      <i class="fas fa-oil-can"></i>
      <input type="text" id="tipoAceiteRecomendado" name="tipoAceiteRecomendado" readonly placeholder="Tipo de aceite recomendado">
      <label id="lblAceite">Aceite recomendado</label>
    </div>

    <!-- Marca de Aceite -->
    <div class="form-group">
      <i class="fas fa-industry"></i>
      <select name="MarcaAceite" id="selectMarcaAceite" required>
        <option value="">Selecciona marca de aceite</option>
        <option value="Mobil 1">Mobil 1</option>
        <option value="Pennzoil">Pennzoil</option>
        <option value="Valvoline">Valvoline</option>
        <option value="Castrol EDGE">Castrol EDGE</option>
        <option value="Shell Helix">Shell Helix</option>
      </select>
      <label id="lblMarcaAceite">Marca de Aceite</label>
    </div>

    <!-- Descripci√≥n del aceite -->
    <div class="form-group">
      <i class="fas fa-info-circle"></i>
      <textarea id="descripcionAceite" name="DescripcionAceite" readonly placeholder="Descripci√≥n del aceite seleccionado"></textarea>
    </div>

    <!-- Precio estimado -->
    <div class="form-group">
      <i class="fas fa-dollar-sign"></i>
      <input type="text" id="precioEstimado" name="PrecioEstimado" readonly placeholder="Precio estimado del servicio">
    </div>

    <!-- Direcci√≥n -->
    <div class="form-group">
      <i class="fas fa-map-marker-alt"></i>
      <input type="text" name="Direccion" placeholder=" " required>
      <label id="lblDireccion">Direcci√≥n del servicio</label>
    </div>

    <!-- Fecha -->
    <div class="form-group">
      <i class="fas fa-calendar-day"></i>
      <input type="date" name="Fecha" placeholder=" " required>
      <label id="lblFecha">Fecha</label>
    </div>

    <!-- Hora -->
    <div class="form-group">
      <i class="fas fa-clock"></i>
      <input type="time" name="Hora" placeholder=" " required>
      <label id="lblHora">Hora</label>
    </div>

    <!-- Comentarios -->
    <div class="form-group">
      <i class="fas fa-comment-dots"></i>
      <textarea name="Comentarios" placeholder=" "></textarea>
      <label id="lblComentarios">Comentarios adicionales</label>
    </div>

    <!-- Acuerdo -->
    <div class="agreement-container">
      <a id="linkAcuerdo">Leer acuerdo completo</a>
    </div>

    <!-- Firma -->
    <div class="firma-container">
      <input type="text" name="Firma" id="firmaInput" placeholder="Escribe tu nombre como firma digital" disabled required>
    </div>

    <!-- Campos ocultos -->
    <input type="hidden" name="Estado" value="Pendiente">
    <input type="hidden" id="langField" name="Idioma">

    <!-- Bot√≥n -->
    <button type="submit" id="btnEnviar">Enviar Reserva</button>
  </form>
</div>
  <!-- Mensaje de confirmaci√≥n -->
  <div class="mensaje" id="mensaje"></div>

  <!-- Recibo de la reserva -->
  <div id="recibo">
    <h3 id="reciboTitulo">‚úÖ Recibo de Reserva</h3>
    <p><b id="reciboLabelNombre">Nombre:</b> <span id="reciboNombre"></span></p>
    <p><b id="reciboLabelTelefono">Tel√©fono:</b> <span id="reciboTelefono"></span></p>
    <p><b id="reciboLabelCorreo">Correo:</b> <span id="reciboCorreo"></span></p>
    <p><b id="reciboLabelMarca">Marca (veh√≠culo):</b> <span id="reciboMarca"></span></p>
    <p><b id="reciboLabelModelo">Modelo:</b> <span id="reciboModelo"></span></p>
    <p><b id="reciboLabelAno">A√±o:</b> <span id="reciboAno"></span></p>
    <p><b id="reciboLabelAceite">Aceite recomendado:</b> <span id="reciboAceite"></span></p>
    <p><b id="reciboLabelMarcaAceite">Marca de Aceite:</b> <span id="reciboMarcaAceite"></span></p>
    <p><b id="reciboLabelDireccion">Direcci√≥n:</b> <span id="reciboDireccion"></span></p>
    <p><b id="reciboLabelFecha">Fecha del Servicio:</b> <span id="reciboFecha"></span></p>
    <p><b id="reciboLabelHora">Hora del Servicio:</b> <span id="reciboHora"></span></p>
    <p><b id="reciboLabelComentarios">Comentarios:</b> <span id="reciboComentarios"></span></p>
    <p><b id="reciboLabelFirma">Firma:</b> <span id="reciboFirma"></span></p>

    <!-- Desglose de precios -->
    <h4 id="reciboLabelPrecio">üí≤ Precio estimado:</h4>
    <p><b>Aceite:</b> <span id="reciboAceiteCosto"></span></p>
    <p><b>Filtro:</b> <span id="reciboFiltro"></span></p>
    <p><b>Mano de Obra:</b> <span id="reciboManoObra"></span></p>
    <p><b>Desecho:</b> <span id="reciboDesecho"></span></p>
    <p><b>Total:</b> <span id="reciboTotal"></span></p>
  </div>

  <!-- Modal del acuerdo -->
  <div id="modalAcuerdo" class="modal">
    <div class="modal-content">
      <span class="modal-close">&times;</span>
      <iframe id="acuerdoFrame" src="acuerdo.html" style="width:100%; height:400px; border:none;"></iframe>
    </div>
  </div>
<!-- === SCRIPT: DICCIONARIOS E IDIOMA === -->
<script>
const textosUI = {
  es: {
    titulo: "Reserva de Servicio a Domicilio",
    lblNombre: "Nombre completo",
    lblTelefono: "Tel√©fono",
    lblCorreo: "Correo electr√≥nico",
    lblMarca: "Marca del veh√≠culo",
    lblModelo: "Modelo del veh√≠culo",
    lblAno: "A√±o del veh√≠culo",
    lblAceite: "Aceite recomendado",
    lblMarcaAceite: "Marca de Aceite",
    lblDireccion: "Direcci√≥n del servicio",
    lblFecha: "Fecha",
    lblHora: "Hora",
    lblComentarios: "Comentarios adicionales",
    linkAcuerdo: "Leer acuerdo completo",
    btnEnviar: "Enviar Reserva",
    reciboTitulo: "‚úÖ Recibo de Reserva",
    alertaAceptar: "Has aceptado el acuerdo",
    enviarExito: "Reserva enviada con √©xito",
    enviarError: "Error al enviar la reserva"
  },
  en: {
    titulo: "Home Service Booking",
    lblNombre: "Full Name",
    lblTelefono: "Phone",
    lblCorreo: "Email",
    lblMarca: "Car Brand",
    lblModelo: "Car Model",
    lblAno: "Year",
    lblAceite: "Recommended Oil",
    lblMarcaAceite: "Oil Brand",
    lblDireccion: "Service Address",
    lblFecha: "Date",
    lblHora: "Time",
    lblComentarios: "Additional Comments",
    linkAcuerdo: "Read full agreement",
    btnEnviar: "Submit Booking",
    reciboTitulo: "‚úÖ Booking Receipt",
    alertaAceptar: "You have accepted the agreement",
    enviarExito: "Booking submitted successfully",
    enviarError: "Error submitting booking"
  },
  pt: {
    titulo: "Reserva de Servi√ßo em Domic√≠lio",
    lblNombre: "Nome completo",
    lblTelefono: "Telefone",
    lblCorreo: "E-mail",
    lblMarca: "Marca do ve√≠culo",
    lblModelo: "Modelo do ve√≠culo",
    lblAno: "Ano do ve√≠culo",
    lblAceite: "√ìleo recomendado",
    lblMarcaAceite: "Marca do √ìleo",
    lblDireccion: "Endere√ßo do servi√ßo",
    lblFecha: "Data",
    lblHora: "Hora",
    lblComentarios: "Coment√°rios adicionais",
    linkAcuerdo: "Ler acordo completo",
    btnEnviar: "Enviar Reserva",
    reciboTitulo: "‚úÖ Recibo de Reserva",
    alertaAceptar: "Voc√™ aceitou o acordo",
    enviarExito: "Reserva enviada com sucesso",
    enviarError: "Erro ao enviar a reserva"
  }
};

// Detectar idioma del navegador
window.lang = (function(){
  const nav = (navigator.languages && navigator.languages[0]) || navigator.language || 'es';
  if(!nav) return 'es';
  if(nav.toLowerCase().startsWith('pt')) return 'pt';
  if(nav.toLowerCase().startsWith('es')) return 'es';
  return 'en';
})();
</script>

<!-- === SCRIPT: LISTA DE MARCAS Y MODELOS === -->
<script>
const marcasModelos = [
  /* üëá aqu√≠ empiezan todas tus marcas y modelos */
  {Marca:"Acura", Modelo:"ILX 2.4L"},
  {Marca:"Acura", Modelo:"MDX 3.5L"},
  {Marca:"Acura", Modelo:"MDX SH-AWD 3.5L"},
  {Marca:"Acura", Modelo:"MDX Sport Hybrid 3.0L"},
  {Marca:"Acura", Modelo:"NSX 3.5L Turbo"},
  {Marca:"Acura", Modelo:"RDX 2WD 2.0L Turbo"},
  {Marca:"Acura", Modelo:"RDX AWD 2.0L Turbo"},
{Marca:"Acura", Modelo:"RLX 3.5L"},
{Marca:"Acura", Modelo:"RLX Sport Hybrid 3.5L"},
{Marca:"Acura", Modelo:"TLX 2.0L Turbo"},
{Marca:"Acura", Modelo:"TLX SH-AWD 3.5L"},
{Marca:"Chevrolet", Modelo:"Aveo"},
{Marca:"Chevrolet", Modelo:"Cruze"},
{Marca:"Chevrolet", Modelo:"Malibu"},
{Marca:"Chevrolet", Modelo:"Impala"},
{Marca:"Chevrolet", Modelo:"Camaro"},
{Marca:"Chevrolet", Modelo:"Corvette"},
{Marca:"Chevrolet", Modelo:"Corvette Z06"},
{Marca:"Chevrolet", Modelo:"Trax"},
{Marca:"Chevrolet", Modelo:"Equinox"},
{Marca:"Chevrolet", Modelo:"Blazer"},
{Marca:"Chevrolet", Modelo:"Traverse"},
{Marca:"Chevrolet", Modelo:"Colorado"},
{Marca:"Chevrolet", Modelo:"Silverado 1500"},
{Marca:"Chevrolet", Modelo:"Silverado 2500HD"},
{Marca:"Chevrolet", Modelo:"Tahoe"},
{Marca:"Chevrolet", Modelo:"Suburban"},
{Marca:"Chevrolet", Modelo:"Trailblazer"},
{Marca:"Chevrolet", Modelo:"Spark"},
{Marca:"Chevrolet", Modelo:"Sonic"},
{Marca:"Dodge", Modelo:"Dart"},
{Marca:"Dodge", Modelo:"Dart"},
{Marca:"Dodge", Modelo:"Neon"},
{Marca:"Dodge", Modelo:"Caliber"},
{Marca:"Dodge", Modelo:"Caliber"},
{Marca:"Dodge", Modelo:"Caliber"},
{Marca:"Dodge", Modelo:"Journey"},
{Marca:"Dodge", Modelo:"Journey"},
{Marca:"Dodge", Modelo:"Avenger"},
{Marca:"Dodge", Modelo:"Avenger"},
{Marca:"Dodge", Modelo:"Charger"},
{Marca:"Dodge", Modelo:"Charger"},
{Marca:"Dodge", Modelo:"Charger"},
{Marca:"Dodge", Modelo:"Charger"},
{Marca:"Dodge", Modelo:"Challenger"},
{Marca:"Dodge", Modelo:"Challenger"},
{Marca:"Dodge", Modelo:"Challenger"},
{Marca:"Dodge", Modelo:"Challenger"},
{Marca:"Dodge", Modelo:"Durango"},
{Marca:"Dodge", Modelo:"Durango"},
{Marca:"Dodge", Modelo:"Durango"},
{Marca:"Dodge", Modelo:"Grand Caravan"},
{Marca:"Dodge", Modelo:"Grand Caravan"},
{Marca:"Dodge", Modelo:"Nitro"},
{Marca:"Dodge", Modelo:"Nitro"},
{Marca:"Dodge", Modelo:"Dakota"},
{Marca:"Dodge", Modelo:"Dakota"},
{Marca:"Dodge", Modelo:"Dakota"},
{Marca:"Dodge", Modelo:"Ram 1500"},
{Marca:"Dodge", Modelo:"Ram 1500"},
{Marca:"Dodge", Modelo:"Ram 2500/3500"},
{Marca:"Dodge", Modelo:"Viper"},
{Marca:"Honda", Modelo:"Civic"},
{Marca:"Honda", Modelo:"Civic"},
{Marca:"Honda", Modelo:"Civic"},
{Marca:"Honda", Modelo:"Accord"},
{Marca:"Honda", Modelo:"Accord"},
{Marca:"Honda", Modelo:"Accord"},
{Marca:"Honda", Modelo:"Accord Hybrid"},
{Marca:"Honda", Modelo:"CR-V"},
{Marca:"Honda", Modelo:"CR-V"},
{Marca:"Honda", Modelo:"HR-V"},
{Marca:"Honda", Modelo:"Fit"},
{Marca:"Honda", Modelo:"Pilot"},
{Marca:"Honda", Modelo:"Odyssey"},
{Marca:"Honda", Modelo:"Ridgeline"},
{Marca:"Honda", Modelo:"Insight"},
{Marca:"Honda", Modelo:"Passport"},
{Marca:"Honda", Modelo:"Pilot Hybrid"},
{Marca:"Honda", Modelo:"CR-V Hybrid"},
{Marca:"Toyota", Modelo:"Yaris"},
{Marca:"Toyota", Modelo:"Corolla"},
{Marca:"Toyota", Modelo:"Corolla"},
{Marca:"Toyota", Modelo:"Camry"},
{Marca:"Toyota", Modelo:"Camry"},
{Marca:"Toyota", Modelo:"Avalon"},
{Marca:"Toyota", Modelo:"Prius"},
{Marca:"Toyota", Modelo:"RAV4"},
{Marca:"Toyota", Modelo:"RAV4"},
{Marca:"Toyota", Modelo:"Highlander"},
{Marca:"Toyota", Modelo:"Sequoia"},
{Marca:"Toyota", Modelo:"4Runner"},
{Marca:"Toyota", Modelo:"Tacoma"},
{Marca:"Toyota", Modelo:"Tacoma"},
{Marca:"Toyota", Modelo:"Tundra"},
{Marca:"Toyota", Modelo:"Tundra"},
{Marca:"Toyota", Modelo:"Sienna"},
{Marca:"Ford", Modelo:"Fiesta"},
{Marca:"Ford", Modelo:"Focus"},
{Marca:"Ford", Modelo:"Focus"},
{Marca:"Ford", Modelo:"Fusion"},
{Marca:"Ford", Modelo:"Fusion"},
{Marca:"Ford", Modelo:"Mustang"},
{Marca:"Ford", Modelo:"Mustang"},
{Marca:"Ford", Modelo:"Explorer"},
{Marca:"Ford", Modelo:"Explorer"},
{Marca:"Ford", Modelo:"F-150"},
{Marca:"Ford", Modelo:"F-150"},
{Marca:"Ford", Modelo:"F-150"},
{Marca:"Ford", Modelo:"F-150"},
{Marca:"Ford", Modelo:"Edge"},
{Marca:"Ford", Modelo:"Edge"},
{Marca:"Ford", Modelo:"Expedition"},
{Marca:"Ford", Modelo:"Escape"},
{Marca:"Ford", Modelo:"Escape"},
{Marca:"GMC", Modelo:"Sierra 1500"},
{Marca:"GMC", Modelo:"Sierra 1500"},
{Marca:"GMC", Modelo:"Sierra 1500"},
{Marca:"GMC", Modelo:"Sierra 2500HD"},
{Marca:"GMC", Modelo:"Canyon"},
{Marca:"GMC", Modelo:"Canyon"},
{Marca:"GMC", Modelo:"Yukon"},
{Marca:"GMC", Modelo:"Yukon"},
{Marca:"GMC", Modelo:"Acadia"},
{Marca:"GMC", Modelo:"Acadia"},
{Marca:"GMC", Modelo:"Terrain"},
{Marca:"GMC", Modelo:"Terrain"},
{Marca:"GMC", Modelo:"Terrain"},
{Marca:"Hyundai", Modelo:"Sonata"},
{Marca:"Hyundai", Modelo:"Sonata"},
{Marca:"Hyundai", Modelo:"Sonata"},
{Marca:"Hyundai", Modelo:"Tucson"},
{Marca:"Hyundai", Modelo:"Palisade"},
{Marca:"Hyundai", Modelo:"Venue"},
{Marca:"Hyundai", Modelo:"Kona"},
{Marca:"Hyundai", Modelo:"Santa Fe"},
{Marca:"Hyundai", Modelo:"Creta"},
{Marca:"Hyundai", Modelo:"Creta"},
{Marca:"Jeep", Modelo:"Renegade"},
{Marca:"Jeep", Modelo:"Renegade"},
{Marca:"Jeep", Modelo:"Compass"},
{Marca:"Jeep", Modelo:"Compass"},
{Marca:"Jeep", Modelo:"Cherokee"},
{Marca:"Jeep", Modelo:"Cherokee"},
{Marca:"Jeep", Modelo:"Cherokee"},
{Marca:"Jeep", Modelo:"Grand Cherokee"},
{Marca:"Jeep", Modelo:"Grand Cherokee"},
{Marca:"Jeep", Modelo:"Grand Cherokee"},
{Marca:"Jeep", Modelo:"Wrangler"},
{Marca:"Jeep", Modelo:"Wrangler"},
{Marca:"Jeep", Modelo:"Wrangler"},
{Marca:"Jeep", Modelo:"Gladiator"},
{Marca:"Infiniti", Modelo:"Q50"},
{Marca:"Infiniti", Modelo:"Q50"},
{Marca:"Infiniti", Modelo:"Q60"},
{Marca:"Infiniti", Modelo:"Q60"},
{Marca:"Infiniti", Modelo:"QX50"},
{Marca:"Infiniti", Modelo:"QX55"},
{Marca:"Infiniti", Modelo:"QX60"},
{Marca:"Infiniti", Modelo:"QX80"},
{Marca:"Infiniti", Modelo:"QX70"},
{Marca:"Infiniti", Modelo:"M35/M37"},
{Marca:"Infiniti", Modelo:"M45"},
{Marca:"Infiniti", Modelo:"FX35"},
{Marca:"Infiniti", Modelo:"FX50"},
{Marca:"Kia", Modelo:"Rio"},
{Marca:"Kia", Modelo:"Forte"},
{Marca:"Kia", Modelo:"Forte"},
{Marca:"Kia", Modelo:"Optima/K5"},
{Marca:"Kia", Modelo:"Optima/K5"},
{Marca:"Kia", Modelo:"Stinger"},
{Marca:"Kia", Modelo:"Stinger"},
{Marca:"Kia", Modelo:"Soul"},
{Marca:"Kia", Modelo:"Soul"},
{Marca:"Kia", Modelo:"Sportage"},
{Marca:"Kia", Modelo:"Sportage"},
{Marca:"Kia", Modelo:"Sorento"},
{Marca:"Kia", Modelo:"Sorento"},
{Marca:"Kia", Modelo:"Telluride"},
{Marca:"Lexus", Modelo:"IS 200t/300"},
{Marca:"Lexus", Modelo:"ES 250/350"},
{Marca:"Lexus", Modelo:"GS 350"},
{Marca:"Lexus", Modelo:"GS 450h"},
{Marca:"Lexus", Modelo:"RX 350"},
{Marca:"Lexus", Modelo:"RX 450h"},
{Marca:"Lexus", Modelo:"NX 300"},
{Marca:"Lexus", Modelo:"NX 300h"},
{Marca:"Lexus", Modelo:"LX 570"},
{Marca:"Lexus", Modelo:"GX 460"},
{Marca:"Lexus", Modelo:"LC 500"},
{Marca:"Lexus", Modelo:"LS 500"},
{Marca:"Lexus", Modelo:"LS 500h"},
{Marca:"Mazda", Modelo:"Mazda2"},
{Marca:"Mazda", Modelo:"Mazda3"},
{Marca:"Mazda", Modelo:"Mazda3"},
{Marca:"Mazda", Modelo:"Mazda6"},
{Marca:"Mazda", Modelo:"CX-3"},
{Marca:"Mazda", Modelo:"CX-30"},
{Marca:"Mazda", Modelo:"CX-5"},
{Marca:"Mazda", Modelo:"CX-9"},
{Marca:"Mazda", Modelo:"MX-5 Miata"},
{Marca:"Mazda", Modelo:"MX-5 Miata Turbo"},
{Marca:"Nissan", Modelo:"Versa"},
{Marca:"Nissan", Modelo:"Sentra"},
{Marca:"Nissan", Modelo:"Sentra"},
{Marca:"Nissan", Modelo:"Altima"},
{Marca:"Nissan", Modelo:"Altima"},
{Marca:"Nissan", Modelo:"Maxima"},
{Marca:"Nissan", Modelo:"Kicks"},
{Marca:"Nissan", Modelo:"Rogue"},
{Marca:"Nissan", Modelo:"Rogue"},
{Marca:"Nissan", Modelo:"Murano"},
{Marca:"Nissan", Modelo:"Pathfinder"},
{Marca:"Nissan", Modelo:"Armada"},
{Marca:"Nissan", Modelo:"Frontier"},
{Marca:"Nissan", Modelo:"Titan"},
{Marca:"Volvo", Modelo:"S60 2.0L Turbo"},
{Marca:"Volvo", Modelo:"S60 T5"},
{Marca:"Volvo", Modelo:"S60 T6"},
{Marca:"Volvo", Modelo:"S60 Recharge"},
{Marca:"Volvo", Modelo:"S90 2.0L Turbo"},
{Marca:"Volvo", Modelo:"S90 T6"},
{Marca:"Volvo", Modelo:"S90 Recharge"},
{Marca:"Volvo", Modelo:"V60 2.0L Turbo"},
{Marca:"Volvo", Modelo:"V60 T6"},
{Marca:"Volvo", Modelo:"V60 Recharge"},
{Marca:"Volvo", Modelo:"XC40 2.0L Turbo"},
{Marca:"Volvo", Modelo:"XC40 T5"},
{Marca:"Volvo", Modelo:"XC60 2.0L Turbo"},
{Marca:"Volvo", Modelo:"XC60 T6"},
{Marca:"Volvo", Modelo:"XC60 Recharge"},
{Marca:"Volvo", Modelo:"XC90 2.0L Turbo"},
{Marca:"Volvo", Modelo:"XC90 T6"},
{Marca:"Volvo", Modelo:"XC90 Recharge"},
{Marca:"Mercedes-Benz", Modelo:"A220"},
{Marca:"Mercedes-Benz", Modelo:"CLA250"},
{Marca:"Mercedes-Benz", Modelo:"GLA250"},
{Marca:"Mercedes-Benz", Modelo:"GLB250"},
{Marca:"Mercedes-Benz", Modelo:"GLC300"},
{Marca:"Mercedes-Benz", Modelo:"GLE350"},
{Marca:"Mercedes-Benz", Modelo:"GLS450"},
{Marca:"Mercedes-Benz", Modelo:"G550"},
{Marca:"Mercedes-Benz", Modelo:"E350"},
{Marca:"Mercedes-Benz", Modelo:"S450"},
{Marca:"Mercedes-Benz", Modelo:"S560"},
{Marca:"Mercedes-Benz", Modelo:"C300"},
{Marca:"Mercedes-Benz", Modelo:"C43 AMG"},
{Marca:"Mercedes-Benz", Modelo:"E450"},
{Marca:"Mercedes-Benz", Modelo:"GLE450"},
{Marca:"Mercedes-Benz", Modelo:"GLS580"},
{Marca:"Mercedes-Benz", Modelo:"G-Class (G550)"},
{Marca:"Mercedes-Benz", Modelo:"G-Class (G63 AMG)"},
{Marca:"Mercedes-Benz", Modelo:"GLK350"},
{Marca:"Mercedes-Benz", Modelo:"GL550"},
{Marca:"Mercedes-Benz", Modelo:"SLC300"},
{Marca:"Mercedes-Benz", Modelo:"SL450"},
{Marca:"Mercedes-Benz", Modelo:"SL550"},
{Marca:"Mercedes-Benz", Modelo:"GLA250 4MATIC"},
{Marca:"Mercedes-Benz", Modelo:"GLB250 4MATIC"},
{Marca:"Mercedes-Benz", Modelo:"GLC300 4MATIC"},
{Marca:"Mercedes-Benz", Modelo:"GLE350 4MATIC"},
{Marca:"Mercedes-Benz", Modelo:"GLS450 4MATIC"},
{Marca:"Mercedes-Benz", Modelo:"G550 4MATIC"},
{Marca:"Mercedes-Benz", Modelo:"S450 4MATIC"},
{Marca:"Mercedes-Benz", Modelo:"S560 4MATIC"},
{Marca:"Mercedes-Benz", Modelo:"C300 4MATIC"},
{Marca:"Mercedes-Benz", Modelo:"E350 4MATIC"},
{Marca:"Mercedes-Benz", Modelo:"SLC300 4MATIC"},
{Marca:"Mercedes-Benz", Modelo:"SL450 4MATIC"},
{Marca:"Mercedes-Benz", Modelo:"SL550 4MATIC"},
{Marca:"Mercedes-Benz", Modelo:"GLA250 4MATIC"},
{Marca:"Mercedes-Benz", Modelo:"GLB250 4MATIC"},
{Marca:"Mercedes-Benz", Modelo:"GLC300 4MATIC"},
{Marca:"Mercedes-Benz", Modelo:"GLE350 4MATIC"},
{Marca:"Mercedes-Benz", Modelo:"GLS450 4MATIC"},
{Marca:"Mercedes-Benz", Modelo:"G550 4MATIC"},
{Marca:"Mercedes-Benz", Modelo:"S450 4MATIC"},
{Marca:"Mercedes-Benz", Modelo:"S560 4MATIC"},
{Marca:"Audi", Modelo:"A1 1.0 TFSI"},
{Marca:"Audi", Modelo:"A1 1.2 TFSI"},
{Marca:"Audi", Modelo:"A1 1.4 TFSI"},
{Marca:"Audi", Modelo:"A3 1.6"},
{Marca:"Audi", Modelo:"A4 1.8 T"},
{Marca:"Audi", Modelo:"A4 2.0 TFSI"},
{Marca:"Audi", Modelo:"A5 2.0 TFSI"},
{Marca:"Audi", Modelo:"A5 2.0 TSI"},
{Marca:"Audi", Modelo:"A7 3.0 TFSI"},
{Marca:"Audi", Modelo:"A8 3.0 TFSI"},
{Marca:"Audi", Modelo:"A8 4.0 TFSI"},
{Marca:"Audi", Modelo:"Q2 1.0 TFSI"},
{Marca:"Audi", Modelo:"Q3 1.5 TFSI"},
{Marca:"Audi", Modelo:"Q3 2.0 TFSI"},
{Marca:"Audi", Modelo:"Q3 Sportback 1.5 TFSI"},
{Marca:"Audi", Modelo:"Q3 Sportback 2.0 TFSI"},
{Marca:"Audi", Modelo:"Q5 2.0 TFSI"},
{Marca:"Audi", Modelo:"Q8 3.0 TFSI"},
{Marca:"Audi", Modelo:"TT 1.8 T"},
{Marca:"Audi", Modelo:"TT 2.0 TFSI"},
{Marca:"Audi", Modelo:"R8 4.2 V8"},
{Marca:"Audi", Modelo:"R8 5.2 V10"},
{Marca:"Audi", Modelo:"RS3 2.5 TFSI"},
{Marca:"Audi", Modelo:"RS4 4.2 V8"},
{Marca:"Audi", Modelo:"RS5 2.9 TFSI"},
{Marca:"Audi", Modelo:"RS6 4.0 TFSI"},
{Marca:"Audi", Modelo:"RS7 4.0 TFSI"},
{Marca:"Audi", Modelo:"S3 2.0 TFSI"},
{Marca:"Audi", Modelo:"S4 3.0 TFSI"},
{Marca:"Audi", Modelo:"S5 3.0 TFSI"},
{Marca:"Audi", Modelo:"S6 4.0 TFSI"},
{Marca:"Audi", Modelo:"S7 4.0 TFSI"},
{Marca:"Audi", Modelo:"S8 4.0 TFSI"},
{Marca:"Audi", Modelo:"SQ5 3.0 TFSI"},
{Marca:"BMW", Modelo:"116i (E87)"},
{Marca:"BMW", Modelo:"118i (F20)"},
{Marca:"BMW", Modelo:"120i (E87/F20)"},
{Marca:"BMW", Modelo:"125i (F20)"},
{Marca:"BMW", Modelo:"316i (E90)"},
{Marca:"BMW", Modelo:"318i (E90/F30)"},
{Marca:"BMW", Modelo:"320i (E90/F30)"},
{Marca:"BMW", Modelo:"325i (E90)"},
{Marca:"BMW", Modelo:"328i (F30)"},
{Marca:"BMW", Modelo:"330i (F30/G20)"},
{Marca:"BMW", Modelo:"335i (E90/F30)"},
{Marca:"BMW", Modelo:"340i (F30/G20)"},
{Marca:"BMW", Modelo:"520i (F10)"},
{Marca:"BMW", Modelo:"528i (F10)"},
{Marca:"BMW", Modelo:"530i (G30)"},
{Marca:"BMW", Modelo:"535i (F10)"},
{Marca:"BMW", Modelo:"540i (G30)"},
{Marca:"BMW", Modelo:"730i (G11)"},
{Marca:"BMW", Modelo:"740i (G11)"},
{Marca:"BMW", Modelo:"M2 (F87)"},
{Marca:"BMW", Modelo:"M3 (E90/F80)"},
{Marca:"BMW", Modelo:"M4 (F82/G82)"},
{Marca:"BMW", Modelo:"M5 (E60/F90)"},
{Marca:"BMW", Modelo:"M6 (E63/F13)"},
{Marca:"BMW", Modelo:"Z4 2.0i"},
{Marca:"BMW", Modelo:"Z4 3.0i"}
];
// Referencias a selects
const marcaSelect = document.getElementById("marcaSelect");
const modeloSelect = document.getElementById("modeloSelect");

// Poblar marcas √∫nicas (sin repetir)
const marcasUnicas = [...new Set(marcasModelos.map(m => m.Marca))].sort();
marcasUnicas.forEach(marca => {
  const opt = document.createElement("option");
  opt.value = marca;
  opt.textContent = marca;
  marcaSelect.appendChild(opt);
});

// Cuando cambia la marca, poblar modelos
marcaSelect.addEventListener("change", () => {
  const marca = marcaSelect.value;
  modeloSelect.innerHTML = `<option value="">Selecciona modelo</option>`;

  marcasModelos
    .filter(m => m.Marca === marca)
    .forEach(m => {
      const opt = document.createElement("option");
      opt.value = m.Modelo;
      opt.textContent = m.Modelo;
      modeloSelect.appendChild(opt);
    });
});
</script>
<!-- Marca de Aceite -->
<div class="form-group">
  <i class="fas fa-industry"></i>
  <select name="MarcaAceite" id="selectMarcaAceite" required>
    <option value="">Selecciona marca de aceite</option>
    <option value="Mobil 1">Mobil 1</option>
    <option value="Pennzoil">Pennzoil</option>
    <option value="Valvoline">Valvoline</option>
    <option value="Castrol EDGE">Castrol EDGE</option>
    <option value="Shell Helix">Shell Helix</option>
  </select>
  <label id="lblMarcaAceite">Marca de Aceite</label>
</div>

<!-- Descripci√≥n del aceite -->
<div class="form-group">
  <i class="fas fa-info-circle"></i>
  <textarea id="descripcionAceite" name="DescripcionAceite" readonly placeholder="Descripci√≥n del aceite seleccionado"></textarea>
</div>
<script>
// === Funci√≥n para extraer la capacidad del motor desde el modelo ===
function obtenerLitrosMotor(modelo) {
  const match = modelo.match(/(\d+(\.\d+)?)L/);
  if (match) {
    return parseFloat(match[1]);
  }
  return 5; // valor por defecto si no se encuentra
}

// === Evento al cambiar modelo: mostrar aceite recomendado ===
document.getElementById("modeloSelect").addEventListener("change", () => {
  const modelo = document.getElementById("modeloSelect").value;
  const litros = obtenerLitrosMotor(modelo);

  // Aqu√≠ puedes mapear aceites recomendados seg√∫n marca/modelo
  // Por simplicidad, ejemplo gen√©rico:
  let aceiteRecomendado = "5W30";
  if (modelo.includes("1.8L")) aceiteRecomendado = "0W20";
  if (modelo.includes("2.4L")) aceiteRecomendado = "5W20";
  if (modelo.includes("3.6L")) aceiteRecomendado = "5W30";

  document.getElementById("tipoAceiteRecomendado").value = aceiteRecomendado;
});

// === Evento al cambiar marca de aceite: mostrar descripci√≥n y calcular precio ===
document.getElementById("selectMarcaAceite").addEventListener("change", async () => {
  const marcaAceite = document.getElementById("selectMarcaAceite").value;
  const modelo = document.getElementById("modeloSelect").value;
  const aceiteRecomendado = document.getElementById("tipoAceiteRecomendado").value;
  const litros = obtenerLitrosMotor(modelo);

  // Mostrar descripci√≥n
  document.getElementById("descripcionAceite").value = aceitesData[marcaAceite]?.descripcion || "";

  if (!marcaAceite || !modelo) return;

  // === Llamada a App Script para calcular precios ===
  try {
    const response = await fetch("TU_URL_DE_APPSCRIPT_AQUI", {
      method: "POST",
      body: JSON.stringify({
        action: "handlePrecios",
        marcaAceite,
        modelo,
        aceiteRecomendado,
        litros
      }),
      headers: { "Content-Type": "application/json" }
    });

    const data = await response.json();

    // Actualizar precio estimado en el formulario
    document.getElementById("precioEstimado").value = data.total || "";

    // Actualizar desglose en el recibo
    document.getElementById("reciboAceiteCosto").textContent = data.aceite || "";
    document.getElementById("reciboFiltro").textContent = data.filtro || "";
    document.getElementById("reciboManoObra").textContent = data.manoObra || "";
    document.getElementById("reciboDesecho").textContent = data.desecho || "";
    document.getElementById("reciboTotal").textContent = data.total || "";

  } catch (err) {
    console.error("Error al consultar App Script:", err);
  }
});
</script>
<script>
document.getElementById("formCita").addEventListener("submit", async function(e) {
  e.preventDefault();

  const form = e.target;
  const formData = new FormData(form);
  const data = Object.fromEntries(formData.entries());

  try {
    // Llamada a tu App Script para guardar la reserva
    const response = await fetch("TU_URL_DE_APPSCRIPT_AQUI", {
      method: "POST",
      body: JSON.stringify({
        action: "guardarReserva",
        ...data
      }),
      headers: { "Content-Type": "application/json" }
    });

    const result = await response.json();

    if (result.success) {
      document.getElementById("mensaje").textContent = "‚úÖ Reserva enviada con √©xito";
      document.getElementById("mensaje").style.color = "lightgreen";

      // Mostrar recibo con los datos enviados
      document.getElementById("reciboNombre").textContent = data.Nombre;
      document.getElementById("reciboTelefono").textContent = data.Telefono;
      document.getElementById("reciboCorreo").textContent = data.Correo;
      document.getElementById("reciboMarca").textContent = data.Marca;
      document.getElementById("reciboModelo").textContent = data.Modelo;
      document.getElementById("reciboAno").textContent = data.Ano;
      document.getElementById("reciboAceite").textContent = data.tipoAceiteRecomendado;
      document.getElementById("reciboMarcaAceite").textContent = data.MarcaAceite;
      document.getElementById("reciboDireccion").textContent = data.Direccion;
      document.getElementById("reciboFecha").textContent = data.Fecha;
      document.getElementById("reciboHora").textContent = data.Hora;
      document.getElementById("reciboComentarios").textContent = data.Comentarios;
      document.getElementById("reciboFirma").textContent = data.Firma;

      // Mostrar recibo
      document.getElementById("recibo").style.display = "block";
    } else {
      document.getElementById("mensaje").textContent = "‚ùå Error al enviar la reserva";
      document.getElementById("mensaje").style.color = "red";
    }
  } catch (err) {
    console.error("Error al enviar:", err);
    document.getElementById("mensaje").textContent = "‚ùå Error de conexi√≥n con App Script";
    document.getElementById("mensaje").style.color = "red";
  }
});
</script>
</body>
</html>