<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reserva Cambio de Aceite</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<style>
  *{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;}
  body{background-color:#121212;color:#e0e0e0;display:flex;justify-content:center;align-items:flex-start;min-height:100vh;padding:40px 10px;}
  .container{background:#1e1e1e;border-radius:12px;box-shadow:0 8px 25px rgba(0,0,0,0.7);padding:40px 30px;max-width:600px;width:100%;}
  h2{text-align:center;margin-bottom:30px;font-size:28px;color:#ffffff;}
  .idiomas{text-align:right;margin-bottom:25px;}
  .idiomas img{width:30px;height:20px;cursor:pointer;margin-left:8px;border-radius:3px;border:1px solid #333;transition:transform 0.2s;}
  .idiomas img:hover{transform:scale(1.2);}
  .form-group{position:relative;margin-bottom:25px;}
  .form-group i{position:absolute;top:50%;left:12px;transform:translateY(-50%);color:#888;font-size:16px;}
  .form-group input, .form-group select, .form-group textarea{
    width:100%;padding:14px 12px 14px 38px;border-radius:8px;border:none;background-color:#2a2a2a;color:#e0e0e0;font-size:15px;transition:all 0.3s ease;
  }
  .form-group input:focus, .form-group select:focus, .form-group textarea:focus{
    outline:none;background-color:#333;box-shadow:0 0 8px #0b5ed7;
  }
  .form-group textarea{min-height:80px;resize:vertical;}
  .form-group label{
    position:absolute;top:50%;left:38px;transform:translateY(-50%);
    pointer-events:none;color:#aaa;transition:0.3s;font-size:14px;background:#1e1e1e;padding:0 5px;
  }
  .form-group input:focus + label, .form-group input:not(:placeholder-shown) + label,
  .form-group select:focus + label, .form-group select:not([value=""]) + label,
  .form-group textarea:focus + label, .form-group textarea:not(:placeholder-shown) + label{
    top:-10px; left:10px; font-size:12px; color:#0b5ed7;
  }
  label.agreement{display:flex;align-items:flex-start;margin-bottom:20px;font-size:14px;}
  label.agreement input{margin-right:12px;margin-top:3px;}
  button{width:100%;padding:15px;background:linear-gradient(90deg,#0b5ed7,#084298);color:white;font-size:17px;border:none;border-radius:10px;cursor:pointer;font-weight:bold;transition:all 0.3s ease;}
  button:hover{background:linear-gradient(90deg,#084298,#0b5ed7);transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.6);}
  .mensaje{text-align:center;margin-top:20px;font-weight:bold;font-size:16px;}
  @media(max-width:600px){.container{padding:30px 20px;}h2{font-size:24px;}}
</style>
</head>
<body>
<div class="container">
  <div class="idiomas">
    <img src="https://flagcdn.com/16x12/es.png" alt="Español" onclick="setLang('es')">
    <img src="https://flagcdn.com/16x12/gb.png" alt="English" onclick="setLang('en')">
    <img src="https://flagcdn.com/16x12/pt.png" alt="Português" onclick="setLang('pt')">
  </div>
  <h2 id="titulo">Reserva de Servicio a Domicilio</h2>
  <form id="formCita">
    <div class="form-group"><i class="fas fa-user"></i><input type="text" name="Nombre" placeholder=" " required><label id="lblNombre">Nombre completo</label></div>
    <div class="form-group"><i class="fas fa-phone"></i><input type="tel" name="Telefono" placeholder=" " required><label id="lblTelefono">Teléfono</label></div>
    <div class="form-group"><i class="fas fa-car"></i><input type="text" name="Marca" placeholder=" "><label id="lblMarca">Marca del vehículo</label></div>
    <div class="form-group"><i class="fas fa-car-side"></i><input type="text" name="Modelo" placeholder=" "><label id="lblModelo">Modelo del vehículo</label></div>
    <div class="form-group"><i class="fas fa-calendar-alt"></i><input type="number" name="Ano" placeholder=" "><label id="lblAno">Año del vehículo</label></div>
    <div class="form-group"><i class="fas fa-oil-can"></i>
      <select name="TipoAceite">
        <option value="0w20">0w20</option>
        <option value="0w30">0w30</option>
        <option value="5w20">5w20</option>
        <option value="5w30">5w30</option>
      </select>
      <label id="lblAceite">Tipo de Aceite</label>
    </div>
    <div class="form-group"><i class="fas fa-map-marker-alt"></i><input type="text" name="Direccion" placeholder=" "><label id="lblDireccion">Dirección del servicio</label></div>
    <div class="form-group"><i class="fas fa-calendar-day"></i><input type="date" name="Fecha" placeholder=" " required><label id="lblFecha">Fecha</label></div>
    <div class="form-group"><i class="fas fa-clock"></i><input type="time" name="Hora" placeholder=" " required><label id="lblHora">Hora</label></div>
    <div class="form-group"><i class="fas fa-comment-dots"></i><textarea name="Comentarios" placeholder=" "></textarea><label id="lblComentarios">Comentarios adicionales</label></div>
    
    <label class="agreement"><input type="checkbox" name="agreement" required><span id="acuerdoTexto">Acepto que la cita se agenda con al menos 24 horas de anticipación.</span></label>
    <input type="hidden" name="Estado" value="Pendiente">
    <button type="submit" id="btnEnviar">Enviar Reserva</button>
  </form>
  <div class="mensaje" id="mensaje"></div>
</div>

<script>
const scriptURL="https://script.google.com/macros/s/AKfycbwcyoLo3vTDna0rWGFw2TohgFtI9kG_A-8FxyJC9Nj_U8okpg0RdwknRyu587WZ7Cs/exec";

const translations={
  es:{titulo:"Reserva de Servicio a Domicilio", enviar:"Enviar Reserva", exito:"✅ Tu cita ha sido registrada correctamente", error24:"❌ La cita debe agendarse con al menos 24 horas de anticipación", Nombre:"Nombre completo", Telefono:"Teléfono", Marca:"Marca del vehículo", Modelo:"Modelo del vehículo", Ano:"Año del vehículo", TipoAceite:"Tipo de Aceite", Direccion:"Dirección del servicio", Fecha:"Fecha", Hora:"Hora", Comentarios:"Comentarios adicionales", acuerdo:"Acepto que la cita se agenda con al menos 24 horas de anticipación."},
  en:{titulo:"Home Service Booking", enviar:"Submit Booking", exito:"✅ Your appointment has been successfully booked", error24:"❌ Appointments must be scheduled at least 24 hours in advance", Nombre:"Full Name", Telefono:"Phone", Marca:"Vehicle Brand", Modelo:"Vehicle Model", Ano:"Vehicle Year", TipoAceite:"Oil Type", Direccion:"Service Address", Fecha:"Date", Hora:"Time", Comentarios:"Additional Comments", acuerdo:"I agree that the appointment is scheduled at least 24 hours in advance."},
  pt:{titulo:"Agendamento de Serviço Domiciliar", enviar:"Enviar Reserva", exito:"✅ Sua reserva foi registrada com sucesso", error24:"❌ As reservas devem ser feitas com pelo menos 24 horas de antecedência", Nombre:"Nome Completo", Telefono:"Telefone", Marca:"Marca do Veículo", Modelo:"Modelo do Veículo", Ano:"Ano do Veículo", TipoAceite:"Tipo de Óleo", Direccion:"Endereço do Serviço", Fecha:"Data", Hora:"Hora", Comentarios:"Comentários Adicionais", acuerdo:"Concordo que a reserva deve ser feita com pelo menos 24 horas de antecedência."}
};

let lang=navigator.language.slice(0,2);
if(!translations[lang]) lang='es';
applyLang(lang);

function setLang(l){lang=l;applyLang(lang);}
function applyLang(lang){
  const t=translations[lang];
  document.getElementById('titulo').innerText=t.titulo;
  document.getElementById('btnEnviar').innerText=t.enviar;
  document.getElementById('acuerdoTexto').innerText=t.acuerdo;
  document.getElementById('lblNombre').innerText=t.Nombre;
  document.getElementById('lblTelefono').innerText=t.Telefono;
  document.getElementById('lblMarca').innerText=t.Marca;
  document.getElementById('lblModelo').innerText=t.Modelo;
  document.getElementById('lblAno').innerText=t.Ano;
  document.getElementById('lblAceite').innerText=t.TipoAceite;
  document.getElementById('lblDireccion').innerText=t.Direccion;
  document.getElementById('lblFecha').innerText=t.Fecha;
  document.getElementById('lblHora').innerText=t.Hora;
  document.getElementById('lblComentarios').innerText=t.Comentarios;
}

document.getElementById('formCita').addEventListener('submit', async function(e){
  e.preventDefault();
  const form=e.target;
  const data=Object.fromEntries(new FormData(form).entries());
  const now=new Date();
  const selected=new Date(data.Fecha+"T"+data.Hora);
  if(selected-now<24*60*60*1000){document.getElementById('mensaje').innerText=translations[lang].error24; return;}
  document.getElementById('mensaje').innerText="⏳ Enviando...";
  try{
    const res=await fetch(scriptURL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});
    const respuesta=await res.json();
    document.getElementById('mensaje').innerText=respuesta.estado==="ok"?translations[lang].exito:"⚠️ Error al registrar la cita";
    if(respuesta.estado==="ok") form.reset();
  }catch(err){document.getElementById('mensaje').innerText="⚠️ Error de conexión";}
});
</script>
</body>
</html>