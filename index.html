<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reserva Cambio de Aceite</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<style>
  *{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;}
  body{background-color:#121212;color:#e0e0e0;display:flex;justify-content:center;align-items:flex-start;min-height:100vh;padding:40px 10px;}
  .container{background:#1e1e1e;border-radius:12px;box-shadow:0 8px 25px rgba(0,0,0,0.7);padding:40px 30px;max-width:600px;width:100%;}
  h2{text-align:center;margin-bottom:30px;font-size:28px;color:#ffffff;}
  .idiomas{text-align:right;margin-bottom:25px;}
  .idiomas img{width:30px;height:20px;cursor:pointer;margin-left:8px;border-radius:3px;border:1px solid #333;transition:transform 0.2s;}
  .idiomas img:hover{transform:scale(1.2);}
  .form-group{position:relative;margin-bottom:25px;}
  .form-group i{position:absolute;top:50%;left:12px;transform:translateY(-50%);color:#888;font-size:16px;}
  .form-group input, .form-group select, .form-group textarea{
    width:100%;padding:14px 12px 14px 38px;border-radius:8px;border:none;background-color:#2a2a2a;color:#e0e0e0;font-size:15px;transition:all 0.3s ease;
  }
  .form-group input:focus, .form-group select:focus, .form-group textarea:focus{
    outline:none;background-color:#333;box-shadow:0 0 8px #0b5ed7;
  }
  .form-group textarea{min-height:80px;resize:vertical;}
  .form-group label{
    position:absolute;top:50%;left:38px;transform:translateY(-50%);
    pointer-events:none;color:#aaa;transition:0.3s;font-size:14px;background:#1e1e1e;padding:0 5px;
  }
  .form-group input:focus + label, .form-group input:not(:placeholder-shown) + label,
  .form-group select:focus + label, .form-group select:not([value=""]) + label,
  .form-group textarea:focus + label, .form-group textarea:not(:placeholder-shown) + label{
    top:-10px; left:10px; font-size:12px; color:#0b5ed7;
  }
  .agreement-container{margin-bottom:20px;text-align:left;}
  .agreement-container a{color:#0b5ed7;text-decoration:underline;font-size:13px;display:inline-block;margin-top:5px;cursor:pointer;}
  .firma-container{margin-bottom:20px;}
  .firma-container input{width:100%;padding:10px;border-radius:8px;border:none;background-color:#2a2a2a;color:#e0e0e0;font-size:15px;}
  button[type="submit"]{width:100%;padding:15px;background:linear-gradient(90deg,#0b5ed7,#084298);color:white;font-size:17px;border:none;border-radius:10px;cursor:pointer;font-weight:bold;transition:all 0.3s ease;}
  button[type="submit"]:hover{background:linear-gradient(90deg,#084298,#0b5ed7);transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.6);}
  .mensaje{text-align:center;margin-top:20px;font-weight:bold;font-size:16px;}
  #recibo{display:none;background:#2a2a2a;margin-top:30px;padding:20px;border-radius:10px;color:#fff;}
  #recibo h3{text-align:center;margin-bottom:20px;}
  .modal{display:none;position:fixed;z-index:9999;left:0;top:0;width:100%;height:100%;overflow:auto;background:rgba(0,0,0,0.8);}
  .modal-content{background:#1e1e1e;margin:50px auto;padding:20px;border-radius:12px;width:90%;max-width:700px;color:#e0e0e0;max-height:80vh;overflow-y:auto;}
  .modal-content h2{text-align:center;margin-bottom:15px;color:#fff;}
  .modal-content p, .modal-content ul{margin-bottom:12px;line-height:1.6;}
  .modal-content ul{margin-left:20px;}
  .modal-close{float:right;font-size:24px;color:#888;cursor:pointer;transition:color 0.2s;}
  .modal-close:hover{color:#fff;}
  .modal-accept{display:block;margin:20px auto 0;padding:12px 25px;background:linear-gradient(90deg,#0b5ed7,#084298);color:white;font-size:16px;border:none;border-radius:10px;cursor:pointer;font-weight:bold;transition:all 0.3s ease;}
  .modal-accept:hover{background:linear-gradient(90deg,#084298,#0b5ed7);transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.6);}
  @media(max-width:600px){.container{padding:30px 20px;}h2{font-size:24px;}}
</style>
</head>
<body>
<div class="container">
  <div class="idiomas">
    <img src="https://flagcdn.com/16x12/es.png" alt="Español" onclick="setLang('es')">
    <img src="https://flagcdn.com/16x12/gb.png" alt="English" onclick="setLang('en')">
    <img src="https://flagcdn.com/16x12/pt.png" alt="Português" onclick="setLang('pt')">
  </div>
  <h2 id="titulo">Reserva de Servicio a Domicilio</h2>
  <form id="formCita">
    <div class="form-group"><i class="fas fa-user"></i><input type="text" name="Nombre" placeholder=" " required><label id="lblNombre">Nombre completo</label></div>
    <div class="form-group"><i class="fas fa-phone"></i><input type="tel" name="Telefono" placeholder=" " required><label id="lblTelefono">Teléfono</label></div>
    <div class="form-group"><i class="fas fa-envelope"></i><input type="email" name="Correo" placeholder=" " required><label id="lblCorreo">Correo electrónico</label></div>
    
    <!-- Contenedor para Marca y Modelo dinámicos -->
    <div id="contenedorVehiculos"></div>

    <div class="form-group"><i class="fas fa-oil-can"></i>
      <select name="TipoAceite" id="selectTipoAceite" required>
        <option value="">Selecciona tipo de aceite</option>
        <option value="0W20">0W20</option>
        <option value="0W30">0W30</option>
        <option value="5W20">5W20</option>
        <option value="5W30">5W30</option>
      </select>
      <label id="lblAceite">Tipo de Aceite</label>
    </div>

    <div class="form-group"><i class="fas fa-oil-can"></i>
      <select name="MarcaAceite" id="selectMarca" required>
        <option value="">Selecciona marca de aceite</option>
      </select>
      <label id="lblMarcaAceite">Marca de Aceite</label>
    </div>

    <div class="form-group">
      <textarea id="descripcionAceite" readonly placeholder="Descripción del aceite seleccionado"></textarea>
    </div>

    <div class="form-group"><i class="fas fa-map-marker-alt"></i><input type="text" name="Direccion" placeholder=" " required><label id="lblDireccion">Dirección del servicio</label></div>
    <div class="form-group"><i class="fas fa-calendar-day"></i><input type="date" name="Fecha" placeholder=" " required><label id="lblFecha">Fecha</label></div>
    <div class="form-group"><i class="fas fa-clock"></i><input type="time" name="Hora" placeholder=" " required><label id="lblHora">Hora</label></div>
    <div class="form-group"><i class="fas fa-comment-dots"></i><textarea name="Comentarios" placeholder=" "></textarea><label id="lblComentarios">Comentarios adicionales</label></div>

    <div class="agreement-container">
      <a id="linkAcuerdo">Leer acuerdo completo</a>
    </div>

    <div class="firma-container">
      <input type="text" name="Firma" id="firmaInput" placeholder="Escribe tu nombre como firma digital" disabled required>
    </div>

    <input type="hidden" name="Estado" value="Pendiente">
    <input type="hidden" id="langField" name="Idioma">
    <button type="submit" id="btnEnviar">Enviar Reserva</button>
  </form>

  <div class="mensaje" id="mensaje"></div>

  <div id="recibo">
    <h3 id="reciboTitulo">✅ Recibo de Reserva</h3>
    <p><b>Nombre:</b> <span id="reciboNombre"></span></p>
    <p><b>Teléfono:</b> <span id="reciboTelefono"></span></p>
    <p><b>Correo:</b> <span id="reciboCorreo"></span></p>
    <p><b>Marca:</b> <span id="reciboMarca"></span></p>
    <p><b>Modelo:</b> <span id="reciboModelo"></span></p>
    <p><b>Año:</b> <span id="reciboAno"></span></p>
    <p><b>Tipo de Aceite:</b> <span id="reciboAceite"></span></p>
    <p><b>Dirección:</b> <span id="reciboDireccion"></span></p>
    <p><b>Fecha del Servicio:</b> <span id="reciboFecha"></span></p>
    <p><b>Hora del Servicio:</b> <span id="reciboHora"></span></p>
    <p><b>Comentarios:</b> <span id="reciboComentarios"></span></p>
    <p><b>Firma:</b> <span id="reciboFirma"></span></p>
  </div>
</div>

<!-- Modal del acuerdo -->
<div id="modalAcuerdo" class="modal">
  <div class="modal-content">
    <span class="modal-close">&times;</span>
    <h2>Acuerdo de Servicio a Domicilio</h2>
    <div id="textoAcuerdo"></div>
    <button class="modal-accept">Aceptar y firmar acuerdo ✅</button>
  </div>
</div>

<script>
// ================== ACUERDO ==================
const acuerdoText = {
  es: `<p>Al solicitar nuestro servicio de cambio de aceite a domicilio, usted acepta los siguientes términos y condiciones:</p><ul><li>El cliente debe proporcionar información veraz sobre el vehículo y la ubicación del servicio.</li><li>Se requiere agendar la cita con al menos 24 horas de anticipación.</li><li>El técnico tiene derecho a reprogramar la cita en caso de condiciones climáticas adversas o emergencias.</li><li>Los precios pueden variar según el tipo de aceite, filtro y servicio adicional solicitado.</li><li>El cliente es responsable de asegurar el acceso adecuado al vehículo durante el servicio.</li><li>Todos los pagos deben completarse al finalizar el servicio.</li><li>El cliente acepta que la firma digital en este formulario es vinculante para aceptar los términos.</li></ul><p>Lea cuidadosamente estos términos antes de aceptar. Al hacer clic en "Aceptar y firmar acuerdo", confirma que ha leído, entendido y acepta estas condiciones.</p>`,
  en: `<p>By requesting our home oil change service, you agree to the following terms and conditions:</p><ul><li>The client must provide accurate information about the vehicle and service location.</li><li>Appointments must be scheduled at least 24 hours in advance.</li><li>The technician reserves the right to reschedule in case of adverse weather or emergencies.</li><li>Prices may vary depending on the type of oil, filter, and additional services requested.</li><li>The client is responsible for ensuring proper access to the vehicle during service.</li><li>All payments must be completed upon service completion.</li><li>The client agrees that the digital signature on this form is binding to accept the terms.</li></ul><p>Read these terms carefully before accepting. By clicking "Accept and sign agreement," you confirm you have read, understood, and accept these conditions.</p>`,
  pt: `<p>Ao solicitar nosso serviço de troca de óleo em domicílio, você concorda com os seguintes termos e condições:</p><ul><li>O cliente deve fornecer informações precisas sobre o veículo e local de serviço.</li><li>Os agendamentos devem ser feitos com pelo menos 24 horas de antecedência.</li><li>O técnico reserva-se o direito de reagendar em caso de condições climáticas adversas ou emergências.</li><li>Os preços podem variar dependendo do tipo de óleo, filtro e serviços adicionais solicitados.</li><li>O cliente é responsável por garantir o acesso adequado ao veículo durante o serviço.</li><li>Todos os pagamentos devem ser concluídos ao final do serviço.</li><li>O cliente concorda que a assinatura digital neste formulário é vinculativa para aceitar os termos.</li></ul><p>Leia atentamente estes termos antes de aceitar. Ao clicar em "Aceitar e assinar acordo", você confirma que leu, entendeu e aceita estas condições.</p>`
};

const modal = document.getElementById('modalAcuerdo');
const linkAcuerdo = document.getElementById('linkAcuerdo');
const modalClose = document.querySelector('.modal-close');
const modalAccept = document.querySelector('.modal-accept');
const firmaInput = document.getElementById('firmaInput');
const textoAcuerdo = document.getElementById('textoAcuerdo');

linkAcuerdo.onclick = () => { modal.style.display = 'block'; };
modalClose.onclick = () => { modal.style.display = 'none'; };
modalAccept.onclick = () => { modal.style.display = 'none'; firmaInput.disabled=false; };

// ================== IDIOMAS ==================
let idioma = navigator.language.slice(0,2);
const langField = document.getElementById('langField');

function setLang(l){
  idioma=l;
  langField.value=idioma;
  textoAcuerdo.innerHTML=acuerdoText[idioma]||acuerdoText['es'];
}
setLang(idioma);

// ================== ACEITES ==================
const aceites = {
  '0W20': 'Aceite sintético 0W20, recomendado para motores modernos, reduce fricción y mejora eficiencia.',
  '0W30': 'Aceite sintético 0W30, mayor protección a temperaturas extremas.',
  '5W20': 'Aceite semisintético 5W20, buena opción para motores con uso moderado.',
  '5W30': 'Aceite semisintético 5W30, equilibrio entre protección y ahorro de combustible.'
};

const selectTipoAceite = document.getElementById('selectTipoAceite');
const descripcionAceite = document.getElementById('descripcionAceite');

selectTipoAceite.addEventListener('change',()=>{ descripcionAceite.value=aceites[selectTipoAceite.value]||''; });

// Marcas y modelos basados en tu hoja completa
const vehiculosData = {
  "Acura": [
    "ILX 2.4L",
    "MDX 3.5L",
    "MDX SH-AWD 3.5L",
    "MDX Sport Hybrid 3.0L",
    "NSX 3.5L Turbo",
    "RDX 2WD 2.0L Turbo",
    "RDX AWD 2.0L Turbo",
    "RLX 3.5L",
    "RLX Sport Hybrid 3.5L",
    "TLX 2.0L Turbo",
    "TLX SH-AWD 3.5L"
  ],
  "Chevrolet": [
    "Aveo","Cruze","Cruze","Malibu","Malibu","Impala","Camaro","Camaro","Camaro",
    "Corvette","Corvette Z06","Trax","Equinox","Equinox","Blazer","Blazer","Traverse",
    "Colorado","Colorado","Silverado 1500","Silverado 1500","Silverado 1500",
    "Silverado 2500HD","Tahoe","Suburban","Trailblazer","Trailblazer","Spark","Sonic"
  ],
  "Dodge": [
    "Dart","Dart","Neon","Caliber","Caliber","Caliber","Journey","Journey",
    "Avenger","Avenger","Charger","Charger","Charger","Charger","Challenger","Challenger",
    "Challenger","Challenger","Durango","Durango","Durango","Grand Caravan","Grand Caravan",
    "Nitro","Nitro","Dakota","Dakota","Dakota","Ram 1500","Ram 1500","Ram 2500/3500","Viper"
  ],
  "Honda": [
    "Civic","Civic","Civic","Accord","Accord","Accord","Accord Hybrid","CR-V","CR-V",
    "HR-V","Fit","Pilot","Odyssey","Ridgeline","Insight","Passport","Pilot Hybrid","CR-V Hybrid"
  ],
  "Toyota": [
    "Yaris 1.5L","Corolla 1.8L","Corolla 2.0L","Camry 2.5L","Camry 3.5L","Avalon 3.5L",
    "Prius 1.8L","RAV4 2.5L","RAV4 2.5L Turbo","Highlander 3.5L","Sequoia 5.7L",
    "4Runner 4.0L","Tacoma 2.7L","Tacoma 3.5L V6","Tundra 4.6L","Tundra 5.7L","Sienna 3.5L"
  ],
  "Ford": [
    "Fiesta 1.0L Turbo","Focus 2.0L","Focus 1.0L EcoBoost","Fusion 2.5L","Fusion 1.5L EcoBoost",
    "Mustang 2.3L","Mustang 5.0L","Explorer 3.5L","Explorer 2.3L EcoBoost","F-150 3.3L",
    "F-150 2.7L Turbo","F-150 3.5L V6","F-150 5.0L V8","Edge 2.0L Turbo","Edge 3.5L V6",
    "Expedition 3.5L V6","Escape 1.5L EcoBoost","Escape 2.0L EcoBoost"
  ],
  "GMC": [
    "Sierra 1500 4.3L","Sierra 1500 5.3L","Sierra 1500 6.2L","Sierra 2500HD 6.6L","Canyon 2.5L",
    "Canyon 3.6L V6","Yukon 5.3L","Yukon 6.2L","Acadia 2.5L","Acadia 3.6L V6","Terrain 1.5L Turbo",
    "Terrain 2.0L Turbo","Terrain 2.5L"
  ],
  "Hyundai": [
    "Sonata 2.5L","Sonata 1.6L Turbo","Sonata 2.5L Turbo","Tucson 2.0L","Palisade 3.8L",
    "Venue 1.6L","Kona 2.0L","Santa Fe 2.5L Turbo","Creta 1.5L","Creta 1.5L Turbo"
  ],
  "Jeep": [
    "Renegade 1.3L Turbo","Renegade 2.4L","Compass 1.3L Turbo","Compass 2.4L","Cherokee 2.0L Turbo",
    "Cherokee 2.4L","Cherokee 3.2L V6","Grand Cherokee 3.6L V6","Grand Cherokee 5.7L V8",
    "Grand Cherokee 6.4L V8","Wrangler 2.0L Turbo","Wrangler 3.6L V6","Wrangler 3.8L V6","Gladiator 3.6L V6"
  ],
  "Infiniti": [
    "Q50 2.0L Turbo","Q50 3.0L Twin Turbo","Q60 2.0L Turbo","Q60 3.0L Twin Turbo","QX50 2.0L Turbo",
    "QX55 2.0L Turbo","QX60 3.5L V6","QX80 5.6L V8","QX70 3.7L V6","M35/M37 3.5L V6",
    "M45 4.5L V8","FX35 3.5L V6","FX50 5.0L V8"
  ],
  "Kia": [
    "Rio 1.6L","Forte 2.0L","Forte 1.6L Turbo","Optima/K5 2.4L","Optima/K5 1.6L Turbo","Stinger 2.0L Turbo",
    "Stinger 3.3L Twin Turbo","Soul 2.0L","Soul 1.6L Turbo","Sportage 2.4L","Sportage 2.0L Turbo",
    "Sorento 2.4L","Sorento 3.3L V6","Telluride 3.8L"
  ],
  "Lexus": [
    "IS 200t/300","ES 250/350","GS 350","GS 450h","RX 350","RX 450h","NX 300","NX 300h","LX 570",
    "GX 460","LC 500","LS 500","LS 500h"
  ],
  "Mazda": [
    "Mazda2 1.5L","Mazda3 2.0L","Mazda3 2.5L","Mazda6 2.5L","CX-3 2.0L","CX-30 2.5L","CX-5 2.5L",
    "CX-9 2.5L Turbo","MX-5 Miata 2.0L","MX-5 Miata 2.0L Turbo"
  ],
  "Nissan": [
    "Versa 1.6L","Sentra 2.0L","Sentra 1.6L Turbo","Altima 2.5L","Altima 2.0L Turbo","Maxima 3.5L",
    "Leaf 0L Electric","Kicks 1.6L","Rogue 2.5L","Rogue 1.5L Turbo","Murano 3.5L","Pathfinder 3.5L",
    "Armada 5.6L","Frontier 3.8L","Titan 5.6L"
  ],
  "Volvo": [
    "S60 2.0L Turbo","S60 T5","S60 T6","S60 Recharge","S90 2.0L Turbo","S90 T6","S90 Recharge",
    "V60 2.0L Turbo","V60 T6","V60 Recharge","XC40 2.0L Turbo","XC40 T5","XC60 2.0L Turbo",
    "XC60 T6","XC60 Recharge","XC90 2.0L Turbo","XC90 T6","XC90 Recharge"
  ]
};

// Población inicial del select de marcas
const selectMarcaVehiculo = document.createElement('select');
selectMarcaVehiculo.id = 'selectMarcaVehiculo';
selectMarcaVehiculo.innerHTML = '<option value="">Selecciona marca</option>';
Object.keys(vehiculosData).forEach(marca=>{
  const opt = document.createElement('option');
  opt.value = marca;
  opt.textContent = marca;
  selectMarcaVehiculo.appendChild(opt);
});

// Filtrado de modelos según marca seleccionada
const selectModeloVehiculo = document.createElement('select');
selectModeloVehiculo.id = 'selectModeloVehiculo';
selectModeloVehiculo.innerHTML = '<option value="">Selecciona modelo</option>';

selectMarcaVehiculo.addEventListener('change', ()=>{
  const marca = selectMarcaVehiculo.value;
  selectModeloVehiculo.innerHTML = '<option value="">Selecciona modelo</option>';
  if(marca && vehiculosData[marca]){
    vehiculosData[marca].forEach(modelo=>{
      const opt = document.createElement('option');
      opt.value = modelo;
      opt.textContent = modelo;
      selectModeloVehiculo.appendChild(opt);
    });
  }
});


// ================== ENVÍO FORMULARIO ==================
const formCita=document.getElementById('formCita');
const mensaje=document.getElementById('mensaje');
formCita.addEventListener('submit',e=>{
  e.preventDefault();
  const datos=new FormData(formCita);
  fetch("https://script.google.com/macros/s/AKfycbyRdgkH4niFB8LtYEhZujedWBYn5-lOQ8Es06aiFMZBY2gtcZoT7PoS0jBc2THluEXtMw/exec",{
    method:"POST",body:datos
  }).then(r=>{
    mensaje.textContent="✅ Reserva enviada correctamente!";
    formCita.reset();
    descripcionAceite.value='';
    selectModeloVehiculo.innerHTML='<option value="">Selecciona modelo</option>';
    firmaInput.disabled=true;
    document.getElementById('recibo').style.display='block';
    document.getElementById('reciboNombre').textContent=datos.get('Nombre');
    document.getElementById('reciboTelefono').textContent=datos.get('Telefono');
    document.getElementById('reciboCorreo').textContent=datos.get('Correo');
    document.getElementById('reciboMarca').textContent=datos.get('Marca') || selectMarcaVehiculo.value;
    document.getElementById('reciboModelo').textContent=datos.get('Modelo') || selectModeloVehiculo.value;
    document.getElementById('reciboAceite').textContent=datos.get('TipoAceite');
    document.getElementById('reciboDireccion').textContent=datos.get('Direccion');
    document.getElementById('reciboFecha').textContent=datos.get('Fecha');
    document.getElementById('reciboHora').textContent=datos.get('Hora');
    document.getElementById('reciboComentarios').textContent=datos.get('Comentarios');
    document.getElementById('reciboFirma').textContent=datos.get('Firma');
  }).catch(err=>{
    mensaje.textContent="❌ Error al enviar la reserva.";
    console.error(err);
  });
});
</script>
</body>
</html>
